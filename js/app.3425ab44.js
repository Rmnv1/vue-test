(function(t){function e(e){for(var n,i,r=e[0],l=e[1],c=e[2],f=0,d=[];f<r.length;f++)i=r[f],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(d.length)d.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],n=!0,r=1;r<s.length;r++){var l=s[r];0!==a[l]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=s[0]))}return t}var n={},a={app:0},o=[];function i(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=n,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"059b":function(t,e,s){"use strict";s("62ae")},"21e2":function(t,e,s){t.exports=s.p+"img/arrow.9aef94ce.svg"},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("UsersList",{attrs:{usersList:t.usersList}}),s("AddUser",{attrs:{addNewUser:t.addNewUser,listOfChiefs:t.listOfChiefs}})],1)},o=[],i=(s("159b"),s("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("Список пользователей")]),n("div",{staticClass:"table-wrap"},[n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",{on:{click:t.sortUsers}},[t._v(" Имя "),n("img",{staticClass:"table__sort-arrow",class:{sortIconRotate:!t.listSorted},attrs:{src:s("21e2"),alt:"Sort arrow icon"}})]),n("th",[t._v(" Телефон ")])])]),t._l(t.usersList,(function(e){return n("tbody",{key:e.name+"_"+e.phone},[n("tr",[n("td",[t._v(t._s(e.name))]),n("td",[t._v(t._s(e.phone))])]),t._l(e.staff,(function(e){return n("tr",{key:e.name+"_"+e.phone,staticClass:"child-row"},[n("td",[n("img",{staticClass:"child-row__icon",attrs:{src:s("aeae"),alt:"Child arrow"}}),t._v(" "+t._s(e.name)+" ")]),n("td",[t._v(t._s(e.phone))])])}))],2)}))],2)])])}),r=[],l=(s("4e82"),{data:function(){return{listSorted:!1}},props:["usersList"],methods:{sortUsers:function(){this.listSorted?this.usersList.sort((function(t,e){return e.name.localeCompare(t.name)})):this.usersList.sort((function(t,e){return t.name.localeCompare(e.name)})),this.listSorted=!this.listSorted}}}),c=l,u=(s("059b"),s("2877")),f=Object(u["a"])(c,i,r,!1,null,null,null),d=f.exports,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("button",{staticClass:"btn btn--center btn--modal",on:{click:t.toggleModal}},[t._v(" Добавить пользователя ")]),s("transition",{attrs:{name:"fade"}},[t.modalIsVisible?s("modal",{attrs:{modalTitle:"Добавить пользователя"},on:{toggleModal:t.toggleModal}},[s("form",{staticClass:"modal-form",attrs:{action:"/"},on:{submit:function(e){return e.preventDefault(),t.addUser.apply(null,arguments)}}},[s("label",{staticClass:"modal-form__label",attrs:{for:"name"}},[t._v(" Имя "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"modal-form__field",attrs:{type:"text",id:"name",name:"name",placeholder:"Введите имя *",required:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),s("label",{staticClass:"modal-form__label",attrs:{for:"phone"}},[t._v(" Телефон "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"modal-form__field",attrs:{type:"number",id:"phone",name:"phone",placeholder:"Введите телефон *",required:""},domProps:{value:t.phone},on:{input:[function(e){e.target.composing||(t.phone=e.target.value)},t.limitPhoneLength]}})]),s("label",{staticClass:"modal-form__label",attrs:{for:"chief"}},[t._v(" Начальник "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.chief,expression:"chief"}],staticClass:"modal-form__list",attrs:{name:"chief",id:"chief"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.chief=e.target.multiple?s:s[0]}}},[s("option",{attrs:{selected:"",disabled:"",value:""}},[t._v("Выберите начальника")]),t._l(t.listOfChiefs,(function(e){return s("option",{key:e.id},[t._v(" "+t._s(e)+" ")])}))],2)]),s("button",{staticClass:"btn btn--modal btn--center"},[t._v("Добавить")])])]):t._e()],1)],1)},p=[],m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-wrap"},[s("div",{staticClass:"overlay",on:{click:t.toggleModal}}),s("div",{staticClass:"modal"},[s("div",{staticClass:"modal__header"},[s("span",{staticClass:"modal__title"},[t._v(t._s(t.modalTitle))]),s("button",{staticClass:"modal__close",on:{click:t.toggleModal}},[t._v("×")])]),s("div",{staticClass:"modal__body"},[t._t("default")],2)])])},v=[],_={props:{modalTitle:{type:String,required:!0}},methods:{toggleModal:function(){this.$emit("toggleModal")}}},b=_,g=(s("a76c"),Object(u["a"])(b,m,v,!1,null,null,null)),w=g.exports,C={data:function(){return{name:"",phone:"",chief:"",phoneMaxLength:11,modalIsVisible:!1}},props:["addNewUser","listOfChiefs"],components:{Modal:w},methods:{toggleModal:function(){this.modalIsVisible=!this.modalIsVisible},addUser:function(){this.addNewUser({name:this.name,phone:this.phone,chief:this.chief,staff:[]}),this.name="",this.phone="",this.chief="",this.toggleModal()},limitPhoneLength:function(){var t=11;this.phone.length>t&&(this.phone=this.phone.substr(0,t))}}},y=C,O=Object(u["a"])(y,h,p,!1,null,null,null),L=O.exports,S={name:"App",data:function(){return{usersList:[{name:"Марина",phone:"+7 (999) 999-99-99",staff:[{name:"Григорий",phone:"+7 (999) 999-99-99"}]},{name:"Пётр",phone:"+7 (999) 999-99-99",staff:[]},{name:"Алексей",phone:"+7 (999) 999-99-99",staff:[{name:"Иван",phone:"+7 (999) 999-99-99"}]},{name:"Борис",phone:"+7 (999) 999-99-99",staff:[]}],listOfChiefs:["Марина","Пётр","Алексей","Борис"]}},components:{UsersList:d,AddUser:L},methods:{addNewUser:function(t){t.chief?this.usersList.forEach((function(e){t.chief==e.name&&e.staff.push({name:t.name,phone:t.phone})})):(this.usersList.push({name:t.name,phone:t.phone,staff:[]}),this.listOfChiefs.push(t.name)),this.saveUsersToLocal()},saveUsersToLocal:function(){window.localStorage.setItem("usersList",JSON.stringify(this.usersList)),window.localStorage.setItem("listOfChiefs",JSON.stringify(this.listOfChiefs))},loadUsersFromLocal:function(){this.usersList=JSON.parse(window.localStorage.getItem("usersList"))||this.usersList,this.listOfChiefs=JSON.parse(window.localStorage.getItem("listOfChiefs"))||this.listOfChiefs}},mounted:function(){this.loadUsersFromLocal()}},x=S,U=(s("5c0b"),Object(u["a"])(x,a,o,!1,null,null,null)),M=U.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(M)}}).$mount("#app")},"5c0b":function(t,e,s){"use strict";s("9c0c")},"62ae":function(t,e,s){},"9c0c":function(t,e,s){},a76c:function(t,e,s){"use strict";s("c8e0")},aeae:function(t,e,s){t.exports=s.p+"img/child-arrow.87eeb509.svg"},c8e0:function(t,e,s){}});
//# sourceMappingURL=app.3425ab44.js.map